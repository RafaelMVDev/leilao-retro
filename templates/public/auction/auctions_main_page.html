{% extends "layouts/base.html" %}
{% block title %} Leilões - Maradindiduns {% endblock %}

{% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/public/auction/auctions_main_page_style.css') }}">
{% endblock %}

{% block js %}
<script>
    // Injeta os dados vindos do backend para o JS (cliente)
    window.AUCTIONS = {{ auctions_list | tojson | safe }};
    window.TOTAL_PAGES = {{ total_pages | default(1) }};
</script>
<script src="{{ url_for('static', filename='js/public/auction/auction_main_page.js') }}" defer></script>
<script src="https://cdn.tailwindcss.com"></script>
{% endblock %}

{% block content %}
<main class="main-leiloes-page">
    <div class="leiloes-layout-container">

        <aside class="filtros-sidebar" id="sidebar-filtros">
            <h4>Filtros Ativos</h4>

            <div class="filtro-grupo">
                <h5 class="filtro-titulo">Categoria</h5>
                <div class="filtro-grupo-conteudo">
                    <!-- categorias serão geradas pelo JS a partir de window.AUCTIONS -->
                    <select id="filter-category" aria-label="Filtrar por categoria" style="color:black">
                        <option value="ALL">Todas as categorias</option>
                    </select>
                </div>
            </div>

            <div class="filtro-grupo">
                <h5 class="filtro-titulo">Ordenar por</h5>
                <div class="filtro-grupo-conteudo">
                    <select id="ordenar" aria-label="Ordenar leilões" style="color:black">
                        <option value="recente">Mais Recentes</option>
                        <option value="menor-valor">Menor Valor</option>
                        <option value="maior-valor">Maior Valor</option>
                        <option value="mais-lances">Mais Lances</option>
                    </select>
                </div>
            </div>

            <div class="filtro-grupo">
                <h5 class="filtro-titulo">Faixa de Preço (máx)</h5>
                <div class="filtro-grupo-conteudo">
                    <input type="range" min="0" max="10000" step="10" value="10000" class="slider" id="price-slider">
                    <div class="preco-label">
                        <span>R$ 0,00</span>
                        <span id="current-max-price">R$ 10.000,00+</span>
                    </div>
                </div>
            </div>

            <div class="filtro-grupo">
                <h5 class="filtro-titulo">Busca</h5>
                <div class="filtro-grupo-conteudo">
                    <input id="search-input" type="search" placeholder="Procurar por título..." aria-label="Buscar leilões">
                </div>
            </div>

            <button class="aplicar-filtros-btn" id="apply-filters">Aplicar Filtros</button>

            <!-- mobile: botão para fechar/abrir filtros (JS controla) -->
            <button id="toggle-filters-mobile" style="display:none; margin-top:10px;">Filtros</button>
        </aside>

        <section class="leiloes-content">
            <div class="leilao-search-bar">
                <input id="search-input-top" type="text" placeholder="O que você está procurando?">
                <select id="ordenar-top" aria-label="Ordenar leilões topo" style="color:black">
                    <option value="recente">Mais Recentes</option>
                    <option value="menor-valor">Menor Valor</option>
                    <option value="maior-valor">Maior Valor</option>
                    <option value="mais-lances">Mais Lances</option>
                </select>
            </div>

            <div class="leilao-grid" id="auctions-grid">
                <!-- os cards serão renderizados pelo JS -->
            </div>

            <nav class="pagination" id="pagination" data-total-pages="{{ total_pages }}"></nav>
        </section>

    </div>
</main>
{% endblock %}

<!--

-->